---
title: "Bash Command Line Tutorial"
author: "Elizabeth Beard & Haroon Popal"
date: "`r format(Sys.time(), '%B %d, %Y')`"
output: 
  html_document:
    toc: true
    toc_float: 
      collapsed: false
    df_print: paged
    css: !expr here::here("./misc/style_bootcamp.css")
knit: (function(inputFile, encoding) { 
      out_dir <- './';
      rmarkdown::render(inputFile,
                        encoding=encoding, 
                        output_file=file.path(dirname(inputFile), out_dir, 'index.html')) })
---

# Introduction

## Learning Objectives
- Practice coding syntax
- Learn how to troubleshoot
- Learn basic coding operations (if-statements, for loops, etc.)


## What is bash?
Bash is a programming language that is used in a command line. There are many different types of programming languages. Bash is commonly used on Macs, Linuxs, and now even PCs. It is similar to C-shell languages like csh, tcsh, and Apple's zsch. 


## Preparing for the tutorial
### Mac users
The terminal (aka command line) is how you will be interacting with bash. Newer Macs use zsch. In my experience, zsch is very similar to bash and you probably do not need to switch to bash for this tutorial. If you wanted to, you would have to:

1. open the terminal (press command + space and then search for "terminal")
2. type "bash"
3. hit enter

### PC users
I liked to use the [gitforwindows](https://gitforwindows.org/) bash implementation. Download this programming and install like you would any other program on windows. Then search for the "Git Bash" program. 


## Using a text editor
There are different ways to write code. One way is to use a notebook style integrated development environment (IDE), such as this tutorial which was written in RStudio, or Jupyter which was used to create the python tutorial. A more similar way is to use a text editor. This can just be a notepad document. However, some more fancy software exists which makes it very helpful to write code by stylizing code so that it is easier to read, like the example below.

~[](images/vcs.PNG)

I would recommend [Visual Code Studio](https://code.visualstudio.com/). For this tutorial, it would be a good idea to type your example code, solutions, and anything else you are entering in to the terminal to the text editor as well. That way when you run a bit a code, you have a copy of it for future use. Probably the most useful part of coding is reusability, which is where the text editor comes in. You can also add comments to code to make notes on what a certain command does. This can be done by adding a "#" at the beginning of a line. Everything on the line after that will not be executable as code. Try using comments to describe commands you use throughout the tutorial.

At the end of the tutorial we will also use a text editor to create a script.


# Basic Bash Commands

## Terminal
The terminal is a way of interacting within your computer that does not require a graphic user interface (GUI). In the olden times, computers did not have a mouse, desktop, folders, and program icons. If you wanted to do something on a computer, you had to give the computer very specific instructions. If the terminal is the "old" way of doing things, why do people still use the terminal today? One reason, and a point we will stress throughout the bootcamp, is for automation. When you interact with a computer via traditional ways, you will have to repeat very redundant motions. Let's say you want to rename 100 files. You will have to right click on each one, hit "rename", and then type out the new name of the file, all while making small but infuriating mistakes at each of these steps. Sometimes you might also make small mistakes that can be harder to catch later, such as if you were to add an extra "a" somewhere. With the terminal, and coding in general, we can create a set of commands, test it on a couple of files, and then run them on all of the other files. Then, if we ever have to do something similar in the future, we will have that code ready, and not have to do redundant things again. 

![](images/terminal.PNG)

But before we get into what is possible with the terminal, we will have to introduce you to some concepts and basic commands to get you using the terminal. 


## Listing
When you open a folder, you can immediate see the files that are inside. In the terminal you will have to give it a command to see what is inside (ignore this con, the pros are coming soon). The command to "list" the contents of the **current directory** is:

```{eval=FALSE}
ls
```
![](images/ls.PNG)

But what is a "current directory", or even a regular "directory". You can think of a directory as a folder, and the current directory would be the current folder. Okay, so now we can see what is in our current directory, but where are we anyways?! Well, if we were using our computer the traditional way, we might have a bar at the top of our finder window that lists the entire address of where we are. In the terminal, we will also have to provide the command to Print the Current Directory.

```{eval=FALSE}
pwd
```
![](images/pwd.PNG)



# Directories
Another word you might see used is "subdirectories", which is just a directory within a directory. Directories are relative and so any given directory can be a subdirectory, depending on your point of reference. One import directory to know is the **home directory**. Computers have a default directory where you generally start once you open the terminal.If you ever find yourself somewhere and want to go to the home directory, just used the "change directory" command:

```{eval=FALSE}
cd
```

#### Exercise 1
Use one of the commands we have used to find the path (location) of the home directory.


## Navigating Directories

### Know where you are going
To navigate through directories, we can used the "cd" command and input a subdirectory to go to there. For example, use the following command to go to the "Desktop" from the home directory:

```{eval=FALSE}
cd Desktop
```

Now when we hit "ls" we can see everything on our desktop:
~[](images/desktop.PNG)

### Going to where you need to go
Now that you know the **ls**, **cd**, and **pwd** commands, you can navigate through your computer just like you would with the finder (on a mac) or the file explorer (on a PC).

#### Exercise 2.a
Navigate to the directory that your COG bootcamp materials are in.

### Getting from A to B
In the previous exercise, did you find yourself repetitively using the **cd** command to go through various directories. One rule of thumb for coding is that if something is repetitive, there is probably a more efficient way to do it. In this case, we can give the **cd** command a path instead of a single directory to navigate to. 

#### Exercise 2.b
Start at your home directory and navigate to the "bash" subdirectory within the COG bootcamp directory.


## Managing Directories

### Creating new directories
To create a new directory, use the "make directory" command while providing a name to the new directory:
```{eval=FALSE}
mkdir test_directory
```
Here, we used an underscore to space out the words "test" and "directory". This is because navigating through directories that have a space or other weird characters in the name can be tricky. So to keep things simple, coders often use underscores instead of spaces.


### Creating subdirectories
We can also create subdirectories by giving a path and then the new subdirectory. The syntax for this is:
```{eval=FALSE}
mkdir path/to/new/filename
```

#### Exercise 2.c
Create a subdirectory within the new "test_directory" and name it "test_subdirectory".

### Moving things
We can use the "move" command to move directories and other files. Here is the syntax for that:
```{eval=FALSE}
mv path/to/file path/to/new/location
```

#### Exercise 2.d
Move the "test_subdirectory" directory back one level, so that it is in the "bash" directory.

### Renaming things
The move command can also be used to rename things. Normally, we would use the move command to move something to somewhere else by providing a path to the new location. To rename something, we won't provide a new path, but just the new name, like so:
```{eval=FALSE}
mv old_filename new_filename
```

#### Exercise 2.e
Rename "test_subdirectory" as "subject_data"


### Copying things
The copy command can be used to copy files from one location to another location with the following syntax:
```{eval=FALSE}
cp path/to/original path/to/new/location
```

#### Exercise 2.f
Copy over the subject data from the main workshop directory into the "subject_data" subdirectory in the "bash" directory.

**Note:** In order to copy directories, you must use the "-r" flag like so:

```{eval=FALSE}
cp -r path/to/original path/to/new/location
```


### Removing things
Removing files can be done by providing the path the file you wish to remove. Again, if you wish to remove a directory, you used use the "-r" flag. 
```{eval=FALSE}
rm path/to/file
```


# If-statements
Now that we know some basic commands, we can get to more complicated things. If-statements allow us to do something if certain a certain condition is met. The syntax for this is:
```{eval=FALSE}
if logical_argument; then
  do something
fi
```

The logical arguments used here can be a variety of things. One thing you can use it for in data management is to see whether certain files exist. The following command will check to see whether a csv exists for a particular subject.
```{eval=FALSE}
if (-e subject_data/subj_ID.csv); then
  echo "The data exists!"
fi
```

## Elif
We can also add additional conditions. These kinds of situations involve something along the lines of "if this do this, or if that do that, else do this."
For example, maybe we forgot how we named our files. Let's try a couple of different file names, and if those don't work, we'll have it printed out that we're failures.
```{eval=FALSE}
if (-e subject_data/subj_ID.csv); then
  echo "The first one was right!"
elif (-e subject_data/ID_subj.csv); then
  echo "The second one was right!"
else
  echo "The file does not exist."
fi
```


# For Loops
For loops allow us to repeat a set of commands. This is very useful when you want to do the same thing for a bunch of subjects. The syntax is:
```{eval=FALSE}
for {thing} in {list_of_things}; do
  do this
  and this
  and that
done
```

#### Exercise 3
Use an if-statement in combination with a for loop to check whether each subject has the appropriate behavioral data file.


# Writing Scripts
Scripts are just bits of code that do things in one executable document. In this tutorial we prepped some data that we will play around with for the rest of the bootcamp. But I forgot that there is a whole second batch of participants whose data we need to prep. 

#### Exercise 4
Create a script that will complete each of the steps we have gone through, for the last batch of subjects.
**Hint**: Try creating comments for each step. Think through what needs to be done. Once you know your steps, then write the code. At the very top of the script, add the following code so that you and the computer knows this is a bash file 
```{eval=FALSE}
#!/bin/bash
```


## Making an executable script
To run a script, we can save the file and then use bash to run all the commands in one command, rather than use copying and pasting each command into the terminal. The make a script executable, we need to change some permission settings with the file, and then run it in the terminal. Use the steps below to make and run the script you created in Exercise 4.

1. Save the script as a ".sh" file. You can name it whatever you want, but try not to put any spaces or special characters into the title.
2. Navigate to where the script is in the terminal.
3. Check the permissions of the file, this can be done by using the "ll" or "ls -l" command:
![](images/ll_pre.PNG)
4. Change the permission to make the file executable by using the code below.
```{eval=FALSE}
chmod u+x exercise_4.sh
```
5. Run the script using the "bash" command.
```{eval=FALSE}
bash exercise_4.sh
```


# Preparing for the rest of the bootcamp

## Installing other software

### Python - Anaconda
[Installation instructions](https://docs.anaconda.com/anaconda/install/index.html)


### R - RStudio
[Install R](https://cran.rstudio.com/)

[Install RStudio](https://www.rstudio.com/products/rstudio/download/#download)


# Conclusion
![](images/meme.jpg)

# Extra

## Installing other software and packages

### Python Day Packages

### R Day Packages

## Symbolic links

## Saving outputs to files

## Grep

## Searching for files/filepaths


# Additional Resources
- [Software Carpentry](https://swcarpentry.github.io/shell-novice/)




